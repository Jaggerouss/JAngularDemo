fom.components.BrightCovePlayer=function(v,c,l,a,i,u,t){"use strict";var y={players:document.getElementsByClassName("video-js"),article:document.getElementsByClassName("f1-article"),inlineVideos:document.getElementsByClassName("f1-cc--video-inline"),overlayVideo:document.getElementsByClassName("f1-cc--video-overlay"),playlistVideos:document.getElementsByClassName("f1-cc--video-playlist"),isPlaylistPlayer:0<document.getElementsByClassName("f1-cc--video-playlist").length,isOverlayPlayer:0<document.getElementsByClassName("f1-cc--video-overlay").length,isSensitiveArticle:!1,videoPlaceHolder:document.getElementsByClassName("f1-cc--image"),freeWallStatus:i.freeWallStatus(),noFreewall:i.noFreewall(),freeWallContainer:document.getElementsByClassName("video-hub-freewall"),videoHubPlaceholder:document.getElementsByClassName("video-hub-placeholder"),articlefreeWallContainer:document.getElementsByClassName("articles"),articlefreeWallLiveBlogContainer:document.getElementsByClassName("articles-live-blog"),defaultVolumeLevel:.7,options:{iosPlayMode:"inline",horizontal:!0,nextButton:!1,showJumpControls:!1,loop:!1,controlBar:{picture_in_picture_control:!1,volumePanel:{inline:!0,vertical:!1}}},analytics:{freewallTrigger:{actionType:"CTAClick",event:"video_CTAClick",path:window.location.href,pathType:"Onpage",navigationElement:"video",locationInPage:"",isFreewallVisible:"",pageName:"",leadSource:"",overlayType:""}},handleAutoPlay:function(t){var e=t.el_.dataset.autoplay,a=!t.paused();"false"===e||a||void 0!==(e=t.play())&&e.then(function(){t.muted(!1),t.volume(y.defaultVolumeLevel)}).catch(function(e){t.muted(!0),t.play()})},setEvents:function(n){var e,o,r,s,d=this;c.videoPlayerStatus.createVideoArray(n),0<this.article.length&&(e=this.article[0].getAttribute("data-sensitive-article")||"",this.isSensitiveArticle="true"===e.toLowerCase()),!n.ima3||a.isAdvertisingEnabled()&&!this.isSensitiveArticle||(n.ima3.settings.serverUrl=""),n.ready(function(){if(a.isRequiredEnabled())for(var e=c.videoPlayerStatus.getVideoArray(),t=0;t<e.length;t++)if(e[t].id_){d.handleAutoPlay(e[t]);break}}),n.on("play",function(){var e=this,t=v(e.el_).offset(),t=(v("html, body").stop().animate({scrollTop:t.top-100},500),c.videoPlayerStatus.getVideoArray());if(c.videoPlayerStatus.pauseVideo(t,e),y.isPlaylistPlayer){var a=v(".related-videos a"),i="f1-video-now-playing";v(a).removeClass(i),v(a).parent().removeClass("playing-video");for(var l=0;l<a.length;l++){var o=a[l],r=v(o).data(),s=r.videoId;e.id_===s&&(v(o).addClass(i),v(o).parent().addClass("playing-video"),r.videoPublishedDate?v(".f1-video--content .published-date").text(r.videoPublishedDate).parent().removeClass("d-none"):v(".f1-video--content .published-date").text("").parent().addClass("d-none"),r.videoTitle&&v(".f1-video--content .video-title").text(r.videoTitle),(r.videoDescription?v(".f1-video--content .video-description").text(r.videoDescription):v(".f1-video--content .video-description").text("")).removeClass("d-none"),l===a.length-1?n.el_.classList.add("last-related-video"):n.el_.classList.remove("last-related-video"))}}}),y.isPlaylistPlayer&&(o=v(".related-videos a"),r=n.getAttribute("data-error-message"),o.removeClass("f1-video-now-playing"),o.parent().removeClass("playing-video"),s=d.getVideoDetails(),o.on("click",function(e){e.preventDefault(),e.stopImmediatePropagation();var a,t,i,l,e=v(this);if(!e.hasClass("f1-video-now-playing"))return a=e.data().videoId,n.pause(),e=e.next().html(),v(".freewall-error").length&&v(".freewall-error").remove(),t=v(this).parent().index(),i=s[t].isProtected,y.analytics.freewallTrigger.event="video_CTAClick",d.freeWallStatus&&"true"==i?(l=n.offsetTop,v("html, body").animate({scrollTop:l-100},500),o.removeClass("f1-video-now-playing"),o.parent().removeClass("playing-video"),d.hidePlayer(n),l={id:a,index:t,loginState:d.freeWallStatus},sessionStorage.setItem("videoHubState",JSON.stringify(l)),v(d.freeWallContainer).show(),v(d.videoHubPlaceholder).html(e),u.update(),y.analytics.freewallTrigger.isFreewallVisible="true",void y.pushTracking(y.analytics.freewallTrigger)):d.noFreewall&&"true"==i?(d.hidePlayer(n),o.removeClass("f1-video-now-playing"),o.parent().removeClass("playing-video"),v(n.el_).parent().after("<div class='freewall-error'><div class='inner-container'>"+r+"</div></div>"),v("html, body").animate({scrollTop:0},500),y.analytics.freewallTrigger.isFreewallVisible="false",void y.pushTracking(y.analytics.freewallTrigger)):(v(d.freeWallContainer).hide(),n.el_.style.display="block",n.el_.querySelector("video").style.display="block",y.analytics.freewallTrigger.isFreewallVisible="false",y.pushTracking(y.analytics.freewallTrigger),void n.catalog.getVideo(a,function(e,t){n.ads.isInAdMode()&&n.ima3.adsManager.destroy(),n.catalog.load(t),n.id_=a,n.setAttribute("id",a),n.el_.querySelector("video").setAttribute("data-video-id",a),n.play()}))}),n.on("ended",function(){var e=v(".related-videos .playing-video").next().find("a");0<e.length&&e.trigger("click")})),y.isOverlayPlayer&&d.overlayPlayer(n)},videoHubOnLoad:function(){var e=this;if(y.isPlaylistPlayer)for(var t=v(".related-videos a"),a=t.eq(0).data("video-id"),i=t.eq(0).parent().index(),l=e.getVideoDetails()[i].isProtected,o=(e.freeWallStatus&&"true"==l&&(i={id:a,index:i,loginState:e.freeWallStatus},sessionStorage.setItem("videoHubState",JSON.stringify(i))),JSON.parse(sessionStorage.getItem("videoHubState"))),r=0;r<e.players.length;r++){var s=e.players[r],n=s.getAttribute("data-error-message");if(null!=o){var d=o.loginState,c=(o.index,o.id);if(0==e.freeWallStatus&&1==d){if(e.noFreewall&&"true"==l)return t.removeClass("f1-video-now-playing"),t.parent().removeClass("playing-video"),v(s).parent().after("<div class='freewall-error'><div class='inner-container'>"+n+"</div></div>"),v("html, body").animate({scrollTop:0},500),void v(s).hide();v(e.freeWallContainer).hide(),v(s).show(),s.setAttribute("id",c),v("html, body").animate({scrollTop:0},500)}else v(e.freeWallContainer).show(),s.setAttribute("id",""),v(s).hide(),v("html, body").animate({scrollTop:0},500)}else{if(e.noFreewall&&"true"==l)return t.removeClass("f1-video-now-playing"),t.parent().removeClass("playing-video"),v(s).parent().after("<div class='freewall-error'><div class='inner-container'>"+n+"</div></div>"),v("html, body").animate({scrollTop:0},500),void v(s).hide();v(e.freeWallContainer).hide(),s.setAttribute("id",a),v(s).show(),v("html, body").animate({scrollTop:0},500)}y.analytics.freewallTrigger.locationInPage="videoHub"}},hidePlayer:function(e){e.setAttribute("id",""),e.el_.querySelector("video").setAttribute("data-video-id",""),e.el_.style.display="none"},showHideInlinePlayers:function(){var e=this,t=e.inlineVideos;if(y.inlineVideos)for(var a=0;a<t.length;a++){var i,l,o,r=t[a];e.articlefreeWallContainer.length?i=e.articlefreeWallContainer:e.articlefreeWallLiveBlogContainer.length&&(i=e.articlefreeWallLiveBlogContainer),0<e.article.length&&(o=v(e.article).data("isprotected"),e.freeWallStatus&&o?(v(t).remove(),v(e.videoPlaceHolder).show(),l=function(){var e=v(i).offset().top;v("html, body").stop().animate({scrollTop:e-100},1e3)},v(e.videoPlaceHolder).on("click",function(){v(i).show({done:l}),y.analytics.freewallTrigger.locationInPage="videoArticle",y.analytics.freewallTrigger.isFreewallVisible="true",y.pushTracking(y.analytics.freewallTrigger)})):(v(i).hide(),v(e.videoPlaceHolder).hide(),o=r.getAttribute("id")?r.getAttribute("id"):r.getAttribute("data-id"),r.setAttribute("data-video-id",o),r.setAttribute("id",o)))}},loadPlayer:function(){for(var e=l.getIDs(),t=0;t<this.players.length;t++){var a=this.players[t],i=a.getAttribute("id"),i=(a.setAttribute("data-account",e.accountID),a.setAttribute("data-player",e.playerID),i&&a.setAttribute("data-video-id",i),a.setAttribute("data-player-uid","bc-"+t),a=bc(a,this.options),this.setEvents(a),document.createElement("span"));i.classList.add("vjs-play-progress-scrubber"),a.el_.querySelector(".vjs-progress-control .vjs-play-progress").appendChild(i)}},overlayPlayer:function(i){v("[data-video-trigger='overlay-video']").on("click",function(e){e.preventDefault(),e.stopImmediatePropagation();var a,e=v(this);e.hasClass("f1-video-now-playing")||(a=e.data().videoId,v(".page-assembly-banner-video").show(),v(".page-assembly-video-overlay").show(),i.catalog.getVideo(a,function(e,t){i.ads.isInAdMode()&&i.ima3.adsManager.destroy(),i.catalog.load(t),i.id_=a,i.setAttribute("id",a),i.el_.querySelector("video").setAttribute("data-video-id",a),i.play()}))}),v(".page-assembly-banner-video .close-btn").on("click",function(){i.ads.isInAdMode()&&i.ima3.adsManager.destroy(),i.pause(),i.setAttribute("id",""),i.el_.querySelector("video").setAttribute("data-video-id",""),v(this).parent().hide(),v(".page-assembly-video-overlay").hide()})},getVideoDetails:function(){var e=v(".related-videos a"),a=[];return e.each(function(){var e=v(this).attr("data-video-id"),t=v(this).attr("data-isprotected");a.push({videoID:e,isProtected:t})}),a},init:function(){0!==this.players.length&&(l.loadScript(v.proxy(this.loadPlayer,this)),y.showHideInlinePlayers(),y.videoHubOnLoad())},setTrackingData:function(){var e=v(i.component).data("page-head-title"),t=v(i.component).data("hasImage");this.analytics.freewallTrigger.leadSource=i.getLeadSource(),this.analytics.freewallTrigger.pageName=e||"",this.analytics.freewallTrigger.overlayType=t?"Image":"No Image"},pushTracking:function(e){t.addProperty(e)}};v(document).ready(function(){y.init(),y.setTrackingData()})}(jQuery,fom.utils,fom.modules.BCscript,fom.modules.cmpScriptLoader,fom.components.freeWall,fom.lazyLoad,fom.tracking),function(e){"use strict";var t=[];e.videoPlayerStatus={createVideoArray:function(e){t.push(e)},getVideoArray:function(){return t},pauseVideo:function(e,t){$.each(e,function(){var e;this.pauseVideo&&(e=this.playerInfo.videoData.video_id,t.pauseVideo&&e===t.playerInfo.videoData.video_id||this.pauseVideo()),this.id_&&this.id_!==t.id_&&this.pause(),this.mb&&this.mb.MbId&&this.mb.MbId&&this.pause()})}}}(fom.utils);