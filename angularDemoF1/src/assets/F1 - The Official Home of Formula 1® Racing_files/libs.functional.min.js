fom.components.socialShare=function(i,r,o){var t={selectors:{body:"body",modal:".fom-content-modal",modalContent:".fom-content-modal .fom-content",modalOverlay:".fom-modal-overlay",modalClose:".fom-content-modal a.icon-close",toggleSocialShare:".toggle-social-share",component:".social-share-wrapper",expand:".expand > a",shareLink:".site-nav .share",socialLink:".social-links-wrapper > li > a"},classes:{noscroll:"noscroll",hidden:"hidden"},data:{componentId:"component-id",articleId:"article-id",shareType:"share-type"},init:function(){this.bodyScrollPosition=i(r).scrollTop(),this.bindEvents(),this.loadTweetWidget()},bindEvents:function(){this.open(),this.close(),this.redirect(),i(this.selectors.toggleSocialShare).on("click",function(e){t.openSocialShareModal(e)})},openSocialShareModal:function(e){e.preventDefault();var e=this,t=i(e.selectors.component).not(".sidebar-top").first().clone(!0,!0);t.removeClass("d-none"),t.find(e.selectors.expand).triggerHandler("click"),i(e.selectors.modalContent).find(e.selectors.component).length||i(e.selectors.modalContent).append(t),i(e.selectors.modal).fadeIn(),i(e.selectors.modalOverlay).fadeIn(),o.controller.lockBodyScroll()},setDataLayer:function(e){var t=this,o=i(t.selectors.component).data(t.data.shareType),t=i(t.selectors.component).parents("*[data-component-type="+o+"]"),e={event:"socialInteraction",componentId:i(t).data("component-id"),socialNetwork:e.networkType,contentDetailShared:i("html").find('meta[property="og:title"]').attr("content"),contentTypeShare:i("html").find('meta[property="og:type"]').attr("content"),actionType:e.shareIntent?"shareIntent":"shareSuccess"};"article"===o?e.articleId=i(t).data("article-id"):"video"===o&&(e.videoId=i(t).data("video-id")),dataLayer.push(e)},open:function(){var t=this;i(t.selectors.shareLink).on("click",function(e){e.preventDefault(),0<i(t.selectors.component).length&&((e=i(t.selectors.component).not(".sidebar-top").first().clone(!0,!0)).find(t.selectors.expand).triggerHandler("click"),i(t.selectors.modalContent).find(t.selectors.component).length||i(t.selectors.modalContent).append(e),i(t.selectors.modal).fadeIn(),i(t.selectors.modalOverlay).fadeIn(),o.controller.lockBodyScroll())})},close:function(){var t=this;i(t.selectors.modalClose).on("click",function(e){e.preventDefault(),o.controller.unlockBodyScroll(),i(t.selectors.modal).fadeOut(),i(t.selectors.modalOverlay).fadeOut(function(){i(t.selectors.modalContent).empty()})})},extend:function(){var o=this;i(o.selectors.expand).on("click",function(e){e.preventDefault();var e=i(this),t=e.parent();(links=e.parents(o.selectors.component).find("li.hidden")).removeClass(o.classes.hidden),t.addClass(o.classes.hidden)})},setWindow:function(e){var t=i(r).width()/2-250,o=i(r).height()/2-200;r.open(e,"","width=500,height=400,top="+o+",left="+t)},loadTweetWidget:function(){var e,t,o,n,a;i(this.selectors.socialLink).length&&void 0===r.twttr&&(r.twttr=(e=document,t="script",o="twitter-wjs",n=e.getElementsByTagName(t)[0],a=r.twttr||{},e.getElementById(o)||((e=e.createElement(t)).id=o,e.src="https://platform.twitter.com/widgets.js",n.parentNode.insertBefore(e,n),a._e=[],a.ready=function(e){a._e.push(e)}),a))},redirect:function(){var n=this;i(n.selectors.socialLink).not(n.selectors.expand).on("click",function(e){e.preventDefault();var e=i(this),t=e.attr("href"),o=e.data("social-network");e.hasClass("icon-twitter")&&r.twttr.widgets||n.setWindow(t),n.setDataLayer({shareIntent:!0,networkType:o})})}};return t.init()}(jQuery,window,fom.components.navigation),fom.components.atom360||(fom.components.atom360={}),fom.components.atom360=function(o,t,n){"use strict";function e(){i(),o(window).scroll(i),o(a.selectors.btnLaunch360).on("click",r),o(a.selectors.btnClose).on("click",s)}var a={selectors:{body:"body",component:".border-animation",atom360:".atom-360--wrapper",atom360Overlay:".atom-360-overlay--wrapper",btnLaunch360:".btn--launch-360",btnClose:".btn--close-atom"},classes:{startAnimation:"start-animation",modalActive:"modal_active",hidden:"d-none"}},i=function(){o(a.selectors.component).each(function(){var e=o(this);t(e,!0)&&setTimeout(function(){e.addClass(a.classes.startAnimation)},500)})},r=function(e){var e=o(e.currentTarget).closest(a.selectors.atom360),t=e.attr("data-iframe-url");(e=e.next(a.selectors.atom360Overlay)).find("iframe").remove(),o('<iframe src="'+t+'" allow="vr; autoplay; fullscreen" src="#" frameborder="0" width="100%" style="flex:1"></iframe>').appendTo(e),e.removeClass(a.classes.hidden),e.length&&o(a.selectors.body).addClass(a.classes.modalActive),n.setTrackingData(o(this))},s=function(e){o(e.currentTarget).closest(a.selectors.atom360Overlay).addClass(a.classes.hidden),o(a.selectors.body).removeClass(a.classes.modalActive),n.setTrackingData(o(this))};0<o(a.selectors.component).length&&o(a.selectors.atom360).is(":visible")&&e()}(jQuery,fom.utils.isInViewPort,fom.tracking),fom.components.twitterEmbed=function(i,a){var e={selectors:{tweetFeed:".tweeter-feed",tweetFeedWrapper:".tweeter-feed-wrapper",twitterFallback:".twitter-fallback"},init:function(){var n=this;0<i(n.selectors.tweetFeed).length&&i.getScript("//platform.twitter.com/widgets.js",function(e,t,o){a.twttr.ready(function(e){n.initFeed()})})},initFeed:function(){var a=this;i(a.selectors.tweetFeed).each(function(e,t){var o=i(this)[0],n=i(this).data("feed-id").toString();twttr.widgets.createTweet(n,o,{theme:"default"}).then(function(e){void 0===e?i(o).find(a.selectors.twitterFallback).show():i(e).css({width:"100%"})})})}};return e.init()}(jQuery,window),fom.components.instagramEmbed=function(i,r,e){e={selectors:{instaFeed:".instagram-feed",instaFeedWrapper:".instagram-feed-wrapper",instaFallback:".instagram-fallback"},instagramAppId:e.getInstagramAppId(),instagramClientToken:e.getinstagramClientToken(),init:function(){var o=this,n=o.instagramAppId,a=o.instagramClientToken;0<i(o.selectors.instaFeed).length&&i(o.selectors.instaFeed).each(function(){var t=i(this),e="https://www.instagram.com/p/"+i(this).data("feed-id");new Promise(function(t,o){i.ajax({method:"GET",url:"https://graph.facebook.com/v8.0/instagram_oembed?url="+e+"&omitscript=true&access_token="+n+"|"+a,dataType:"JSON"}).done(function(e){t(e)}).fail(function(e){o(e)})}).then(function(e){void 0!==e&&e.html?t.parent(o.selectors.instaFeedWrapper).append(e.html):t.find(o.selectors.instaFallback).show(),r.instgrm&&instgrm.Embeds.process()}).catch(function(e){console.log("instaPostReqest error",e),t.find(o.selectors.instaFallback).show()})})}};return e.init()}(jQuery,window,fom.components.webService),fom.components.youtubePlayer=function(n,a,t){function i(e){e.each(function(){new YoutubePlayer(n(this),{}).initialize()})}o=0;var o,e=function(e){var t=++o+"";return e?e+t:t},r=n(a),s=((YoutubePlayer=function(e,t){this.element=e,this.params=t,this.done=!1}).prototype.initialize=function(){this.id=e("youtube-player-"),this.videoId=this.element.data("video-id"),this.element.find(".player").attr("id",this.id),this.createPlayer(this.id),this.subscribe()},YoutubePlayer.prototype.subscribe=function(){r.on("video-playing",n.proxy(function(e,t){this.id!==t.id&&this.player.pauseVideo()},this))},YoutubePlayer.prototype.createPlayer=function(e){this.player=new YT.Player(e,{videoId:this.videoId,playerVars:{autoplay:0,color:"red",enablejsapi:1,modestbranding:1,showinfo:0,rel:0,hl:"en-us"},events:{onReady:n.proxy(this.onPlayerReady,this),onStateChange:n.proxy(this.onPlayerStateChange,this),onError:n.proxy(this.onPlayerError,this)}}),this.gtmLastAction="p",t.videoPlayerStatus.createVideoArray(this.player)},YoutubePlayer.prototype.onPlayerReady=function(t){this.element.find(".play-video").on("click",n.proxy(function(e){e.preventDefault(),this.hidePreviewImage(),t.target.playVideo()},this))},YoutubePlayer.prototype.onPlayerStateChange=function(e){var t,o=e.target.getVideoUrl();e.data==YT.PlayerState.ENDED&&(this.element.hasClass("in-page")||(this.player.destroy(),this.showPreviewImage()),dataLayer.push({event:"youtube",eventCategory:o,eventAction:"Video Completed",eventLabel:""})),e.data==YT.PlayerState.PLAYING&&(e.target.a&&e.target.a.src,t=fom.utils.videoPlayerStatus.getVideoArray(),setTimeout(n.proxy(this.onPlayerPercent,this),1e3,e.target),fom.utils.videoPlayerStatus.pauseVideo(t,e.target)),e.data==YT.PlayerState.PLAYING&&"p"==this.gtmLastAction&&(dataLayer.push({event:"youtube",eventCategory:o,eventAction:"Video Played",eventLabel:""}),this.gtmLastAction="",r.trigger("video-playing",{id:this.id})),e.data==YT.PlayerState.PAUSED&&(dataLayer.push({event:"youtube",eventCategory:o,eventAction:"Video Paused",eventLabel:""}),this.gtmLastAction="p")},YoutubePlayer.prototype.onPlayerPercent=function(e){var t,o;e.getPlayerState()==YT.PlayerState.PLAYING&&(t=e.getDuration()-e.getCurrentTime()<=1.5?1:(Math.floor(e.getCurrentTime()/e.getDuration()*20)/20).toFixed(2),(!e.lastP||t>e.lastP)&&-1!=[.25,.5,.75,.9,1].indexOf(+t)&&(o=e.getVideoUrl(),e.lastP=t,label=100*t+"%",dataLayer.push({event:"youtube",eventCategory:o,eventAction:"Milestone",eventLabel:label})),1!=e.lastP&&setTimeout(n.proxy(this.onPlayerPercent,this),1e3,e))},YoutubePlayer.prototype.onPlayerError=function(e){dataLayer.push({event:"error",eventCategory:"Youtube Videos",eventAction:"GTM",eventLabel:"youtube:"+e.target.src+"-"+e.data})},YoutubePlayer.prototype.hidePreviewImage=function(){this.element.find(".play-icon").hide(),this.element.find("img").hide()},YoutubePlayer.prototype.showPreviewImage=function(){this.element.find(".play-icon").show(),this.element.find("img").show()},n(".youtube-player"));return s.length&&function(e){var t,o;"undefined"==typeof YT?(a.onYouTubePlayerAPIReady=n.proxy(function(){i(e)},this),(t=document.createElement("script")).src="https://www.youtube.com/iframe_api",(o=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,o)):i(e)}(s),YoutubePlayer}(jQuery,window,fom.utils);